name: Gemini AI Analysis

# Self-use wrapper that calls the reusable workflow
# Other repos should use reusable-gemini-ai.yml directly

on:
  pull_request:
    types: [opened, synchronize, reopened]
  issues:
    types: [opened, labeled]
  workflow_dispatch:
    inputs:
      analysis_type:
        description: 'Type of analysis to perform'
        required: true
        default: 'comprehensive'
        type: choice
        options:
          - 'pr-review'
          - 'comprehensive'

jobs:
  ai-analysis:
    if: vars.ENABLE_AI_ANALYSIS == 'true'
    uses: ./.github/workflows/reusable-gemini-ai.yml
    with:
      enable-pr-review: true
      enable-ci-analysis: true
      enable-issue-triage: true
      enable-comprehensive: true
      gemini-model: 'gemini-2.0-flash'
    secrets:
      GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
